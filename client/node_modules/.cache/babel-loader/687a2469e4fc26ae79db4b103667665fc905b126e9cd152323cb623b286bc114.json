{"ast":null,"code":"var _jsxFileName = \"/Users/adigyawali/Documents/Projects/StocksApp/client/src/pages/Dashboard/dashboard.js\",\n  _s = $RefreshSig$();\n// pages/Dashboard/dashboard.js\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport { Plus, Minus, Search, TrendingUp, TrendingDown } from \"lucide-react\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport \"./dashboard.css\";\n\n// Configure axios\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst api = axios.create({\n  baseURL: \"http://127.0.0.1:5000\"\n});\nfunction Dashboard({\n  username\n}) {\n  _s();\n  var _portfolioData$holdin, _portfolioData$holdin2;\n  const navigate = useNavigate();\n  const [portfolioData, setPortfolioData] = useState({\n    total_value: 0,\n    total_cost: 0,\n    overall_gain_loss: 0,\n    overall_gain_loss_percent: 0,\n    holdings: []\n  });\n  const [loading, setLoading] = useState(true);\n  const [searchTicker, setSearchTicker] = useState(\"\");\n  const [transactionTicker, setTransactionTicker] = useState(\"\");\n  const [transactionType, setTransactionType] = useState(\"buy\"); // \"buy\" or \"sell\"\n  const [transactionQuantity, setTransactionQuantity] = useState(1);\n  const [transactionPrice, setTransactionPrice] = useState(0);\n  const [showModal, setShowModal] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [selectedStock, setSelectedStock] = useState(null);\n  const [stockHistory, setStockHistory] = useState([]);\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) {\n      navigate(\"/login\");\n      return;\n    }\n    fetchPortfolio();\n  }, [navigate]);\n  const fetchPortfolio = async () => {\n    const token = localStorage.getItem(\"token\");\n    try {\n      const res = await api.get(\"/portfolio\", {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setPortfolioData(res.data);\n      setLoading(false);\n    } catch (err) {\n      var _err$response;\n      console.error(err);\n      if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 401) navigate(\"/login\");\n      setLoading(false);\n    }\n  };\n  const handleSearch = async e => {\n    e.preventDefault();\n    if (!searchTicker) return;\n\n    // Pre-fill modal with searched ticker\n    openTransactionModal(searchTicker.toUpperCase(), \"buy\");\n  };\n  const openTransactionModal = (ticker, type) => {\n    setTransactionTicker(ticker);\n    setTransactionType(type);\n    setTransactionQuantity(1);\n\n    // Ideally fetch current price here\n    // For now, user enters price or we could fetch it\n    fetchCurrentPrice(ticker);\n    setShowModal(true);\n    setError(\"\");\n  };\n  const fetchCurrentPrice = async ticker => {\n    // Reuse the Finnhub proxy via our backend or just ask user\n    // For this prototype, we'll ask user but try to pre-fill if possible\n    // Simplified: User inputs price\n    setTransactionPrice(0);\n  };\n  const handleTransaction = async () => {\n    const token = localStorage.getItem(\"token\");\n    const endpoint = transactionType === \"buy\" ? \"/portfolio/add\" : \"/portfolio/remove\";\n    try {\n      await api.post(endpoint, {\n        ticker: transactionTicker,\n        quantity: parseInt(transactionQuantity),\n        price: parseFloat(transactionPrice)\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setShowModal(false);\n      fetchPortfolio();\n      setSearchTicker(\"\");\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Transaction failed\");\n    }\n  };\n  const selectStock = async ticker => {\n    if (selectedStock === ticker) {\n      setSelectedStock(null);\n      setStockHistory([]);\n      return;\n    }\n    setSelectedStock(ticker);\n    setStockHistory([]); // Clear previous data while loading\n\n    try {\n      const res = await api.get(`/stock/${ticker}/history`);\n      // Transform for recharts if needed, but backend sends { date, price } which works if we map keys\n      // Our backend sends [{ date: \"MM/DD\", price: 123.45 }, ...]\n      // Recharts expects dataKey=\"price\" (value) and label=\"date\" (name)\n\n      const formattedData = res.data.map(item => ({\n        name: item.date,\n        value: item.price\n      }));\n      setStockHistory(formattedData);\n    } catch (err) {\n      console.error(\"Failed to fetch history\", err);\n      // Fallback or empty\n      setStockHistory([]);\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loading\",\n    children: \"Loading Dashboard...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 135,\n    columnNumber: 25\n  }, this);\n\n  // Safeguard numerical values to prevent runtime crashes\n  const totalValue = Number((portfolioData === null || portfolioData === void 0 ? void 0 : portfolioData.total_value) || 0);\n  const totalCost = Number((portfolioData === null || portfolioData === void 0 ? void 0 : portfolioData.total_cost) || 0);\n  const gainLoss = Number((portfolioData === null || portfolioData === void 0 ? void 0 : portfolioData.overall_gain_loss) || 0);\n  const gainLossPercent = Number((portfolioData === null || portfolioData === void 0 ? void 0 : portfolioData.overall_gain_loss_percent) || 0);\n  const formatMoney = (value = 0) => Number(value || 0).toFixed(2);\n  const formatPercent = (value = 0) => Number(value || 0).toFixed(2);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"dashboard-header\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: [\"Welcome, \", username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSearch,\n          className: \"portfolio-search\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-wrapper\",\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              placeholder: \"Search ticker to add...\",\n              value: searchTicker,\n              onChange: e => setSearchTicker(e.target.value)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 155,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            children: \"Add Stock\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"portfolio-summary-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"Total Portfolio Value\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"value-display\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"currency\",\n            children: \"$\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"amount\",\n            children: totalValue.toLocaleString(undefined, {\n              minimumFractionDigits: 2,\n              maximumFractionDigits: 2\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `pnl-indicator ${gainLoss >= 0 ? 'positive' : 'negative'}`,\n          children: [gainLoss >= 0 ? /*#__PURE__*/_jsxDEV(TrendingUp, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 42\n          }, this) : /*#__PURE__*/_jsxDEV(TrendingDown, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 69\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pnl-amount\",\n            children: [gainLoss >= 0 ? '+' : '', \"$\", Math.abs(gainLoss).toFixed(2)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"pnl-percent\",\n            children: [\"(\", gainLossPercent.toFixed(2), \"%)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"portfolio-graph\",\n          children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n            width: \"100%\",\n            height: 200,\n            children: /*#__PURE__*/_jsxDEV(LineChart, {\n              data: [{\n                name: 'Start',\n                value: totalCost\n              }, {\n                name: 'Now',\n                value: totalValue\n              }],\n              children: [/*#__PURE__*/_jsxDEV(CartesianGrid, {\n                strokeDasharray: \"3 3\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(XAxis, {\n                dataKey: \"name\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(YAxis, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Tooltip, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 195,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Line, {\n                type: \"monotone\",\n                dataKey: \"value\",\n                stroke: \"#8884d8\",\n                strokeWidth: 2\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"holdings-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Your Holdings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"holdings-grid\",\n          children: [portfolioData === null || portfolioData === void 0 ? void 0 : (_portfolioData$holdin = portfolioData.holdings) === null || _portfolioData$holdin === void 0 ? void 0 : _portfolioData$holdin.map(stock => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `holding-card ${selectedStock === stock.ticker ? 'selected' : ''}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"holding-header\",\n              onClick: () => selectStock(stock.ticker),\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ticker-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                  children: stock.ticker\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"shares\",\n                  children: [stock.quantity, \" shares\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"price-info\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"current-val\",\n                  children: [\"$\", formatMoney(stock.market_value)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 214,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: `stock-pnl ${stock.gain_loss >= 0 ? 'green' : 'red'}`,\n                  children: [stock.gain_loss >= 0 ? '+' : '', formatMoney(stock.gain_loss), \" (\", formatPercent(stock.gain_loss_percent), \"%)\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 33\n            }, this), selectedStock === stock.ticker && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"holding-details\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mini-graph\",\n                children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n                  width: \"100%\",\n                  height: 100,\n                  children: /*#__PURE__*/_jsxDEV(LineChart, {\n                    data: stockHistory,\n                    children: /*#__PURE__*/_jsxDEV(Line, {\n                      type: \"monotone\",\n                      dataKey: \"value\",\n                      stroke: \"#82ca9d\",\n                      dot: false\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 227,\n                      columnNumber: 53\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 226,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 225,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"holding-actions\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-buy\",\n                  onClick: () => openTransactionModal(stock.ticker, \"buy\"),\n                  children: [/*#__PURE__*/_jsxDEV(Plus, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 233,\n                    columnNumber: 49\n                  }, this), \" Buy More\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 232,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-sell\",\n                  onClick: () => openTransactionModal(stock.ticker, \"sell\"),\n                  children: [/*#__PURE__*/_jsxDEV(Minus, {\n                    size: 16\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 236,\n                    columnNumber: 49\n                  }, this), \" Sell\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 235,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 37\n            }, this)]\n          }, stock.ticker, true, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 29\n          }, this)), (portfolioData === null || portfolioData === void 0 ? void 0 : (_portfolioData$holdin2 = portfolioData.holdings) === null || _portfolioData$holdin2 === void 0 ? void 0 : _portfolioData$holdin2.length) === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"empty-portfolio\",\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"You don't own any stocks yet. Search above to get started!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 244,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 13\n    }, this), showModal && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [transactionType === 'buy' ? 'Buy' : 'Sell', \" \", transactionTicker]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 25\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"error-text\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 258,\n          columnNumber: 35\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Quantity\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            min: \"1\",\n            value: transactionQuantity,\n            onChange: e => setTransactionQuantity(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Price per Share ($)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"number\",\n            step: \"0.01\",\n            value: transactionPrice,\n            onChange: e => setTransactionPrice(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 272,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-actions\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"cancel-btn\",\n            onClick: () => setShowModal(false),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `confirm-btn ${transactionType}`,\n            onClick: handleTransaction,\n            children: [\"Confirm \", transactionType === 'buy' ? 'Purchase' : 'Sale']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 9\n  }, this);\n}\n_s(Dashboard, \"nV8ca2FVKSZAkwNvW7e7Twt3LkE=\", false, function () {\n  return [useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","axios","Plus","Minus","Search","TrendingUp","TrendingDown","LineChart","Line","XAxis","YAxis","CartesianGrid","Tooltip","ResponsiveContainer","jsxDEV","_jsxDEV","api","create","baseURL","Dashboard","username","_s","_portfolioData$holdin","_portfolioData$holdin2","navigate","portfolioData","setPortfolioData","total_value","total_cost","overall_gain_loss","overall_gain_loss_percent","holdings","loading","setLoading","searchTicker","setSearchTicker","transactionTicker","setTransactionTicker","transactionType","setTransactionType","transactionQuantity","setTransactionQuantity","transactionPrice","setTransactionPrice","showModal","setShowModal","error","setError","selectedStock","setSelectedStock","stockHistory","setStockHistory","token","localStorage","getItem","fetchPortfolio","res","get","headers","Authorization","data","err","_err$response","console","response","status","handleSearch","e","preventDefault","openTransactionModal","toUpperCase","ticker","type","fetchCurrentPrice","handleTransaction","endpoint","post","quantity","parseInt","price","parseFloat","_err$response2","_err$response2$data","message","selectStock","formattedData","map","item","name","date","value","className","children","fileName","_jsxFileName","lineNumber","columnNumber","totalValue","Number","totalCost","gainLoss","gainLossPercent","formatMoney","toFixed","formatPercent","onSubmit","size","placeholder","onChange","target","toLocaleString","undefined","minimumFractionDigits","maximumFractionDigits","Math","abs","width","height","strokeDasharray","dataKey","stroke","strokeWidth","stock","onClick","market_value","gain_loss","gain_loss_percent","dot","length","min","step","_c","$RefreshReg$"],"sources":["/Users/adigyawali/Documents/Projects/StocksApp/client/src/pages/Dashboard/dashboard.js"],"sourcesContent":["// pages/Dashboard/dashboard.js\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport axios from 'axios';\nimport { Plus, Minus, Search, TrendingUp, TrendingDown } from \"lucide-react\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from 'recharts';\nimport \"./dashboard.css\";\n\n// Configure axios\nconst api = axios.create({\n    baseURL: \"http://127.0.0.1:5000\"\n});\n\nfunction Dashboard({ username }) {\n    const navigate = useNavigate();\n    const [portfolioData, setPortfolioData] = useState({\n        total_value: 0,\n        total_cost: 0,\n        overall_gain_loss: 0,\n        overall_gain_loss_percent: 0,\n        holdings: []\n    });\n    const [loading, setLoading] = useState(true);\n    const [searchTicker, setSearchTicker] = useState(\"\");\n    const [transactionTicker, setTransactionTicker] = useState(\"\");\n    const [transactionType, setTransactionType] = useState(\"buy\"); // \"buy\" or \"sell\"\n    const [transactionQuantity, setTransactionQuantity] = useState(1);\n    const [transactionPrice, setTransactionPrice] = useState(0);\n    const [showModal, setShowModal] = useState(false);\n    const [error, setError] = useState(\"\");\n    const [selectedStock, setSelectedStock] = useState(null);\n    const [stockHistory, setStockHistory] = useState([]);\n\n    useEffect(() => {\n        const token = localStorage.getItem(\"token\");\n        if (!token) {\n            navigate(\"/login\");\n            return;\n        }\n        fetchPortfolio();\n    }, [navigate]);\n\n    const fetchPortfolio = async () => {\n        const token = localStorage.getItem(\"token\");\n        try {\n            const res = await api.get(\"/portfolio\", {\n                headers: { Authorization: `Bearer ${token}` }\n            });\n            setPortfolioData(res.data);\n            setLoading(false);\n        } catch (err) {\n            console.error(err);\n            if (err.response?.status === 401) navigate(\"/login\");\n            setLoading(false);\n        }\n    };\n\n    const handleSearch = async (e) => {\n        e.preventDefault();\n        if (!searchTicker) return;\n        \n        // Pre-fill modal with searched ticker\n        openTransactionModal(searchTicker.toUpperCase(), \"buy\");\n    };\n\n    const openTransactionModal = (ticker, type) => {\n        setTransactionTicker(ticker);\n        setTransactionType(type);\n        setTransactionQuantity(1);\n        \n        // Ideally fetch current price here\n        // For now, user enters price or we could fetch it\n        fetchCurrentPrice(ticker);\n        \n        setShowModal(true);\n        setError(\"\");\n    };\n\n    const fetchCurrentPrice = async (ticker) => {\n        // Reuse the Finnhub proxy via our backend or just ask user\n        // For this prototype, we'll ask user but try to pre-fill if possible\n        // Simplified: User inputs price\n        setTransactionPrice(0); \n    };\n\n    const handleTransaction = async () => {\n        const token = localStorage.getItem(\"token\");\n        const endpoint = transactionType === \"buy\" ? \"/portfolio/add\" : \"/portfolio/remove\";\n        \n        try {\n            await api.post(endpoint, {\n                ticker: transactionTicker,\n                quantity: parseInt(transactionQuantity),\n                price: parseFloat(transactionPrice)\n            }, {\n                headers: { Authorization: `Bearer ${token}` }\n            });\n            \n            setShowModal(false);\n            fetchPortfolio();\n            setSearchTicker(\"\");\n        } catch (err) {\n            setError(err.response?.data?.message || \"Transaction failed\");\n        }\n    };\n\n    const selectStock = async (ticker) => {\n        if (selectedStock === ticker) {\n            setSelectedStock(null);\n            setStockHistory([]);\n            return;\n        }\n        \n        setSelectedStock(ticker);\n        setStockHistory([]); // Clear previous data while loading\n\n        try {\n            const res = await api.get(`/stock/${ticker}/history`);\n            // Transform for recharts if needed, but backend sends { date, price } which works if we map keys\n            // Our backend sends [{ date: \"MM/DD\", price: 123.45 }, ...]\n            // Recharts expects dataKey=\"price\" (value) and label=\"date\" (name)\n            \n            const formattedData = res.data.map(item => ({\n                name: item.date,\n                value: item.price\n            }));\n            setStockHistory(formattedData);\n        } catch (err) {\n            console.error(\"Failed to fetch history\", err);\n            // Fallback or empty\n            setStockHistory([]);\n        }\n    };\n\n    if (loading) return <div className=\"loading\">Loading Dashboard...</div>;\n    \n    // Safeguard numerical values to prevent runtime crashes\n    const totalValue = Number(portfolioData?.total_value || 0);\n    const totalCost = Number(portfolioData?.total_cost || 0);\n    const gainLoss = Number(portfolioData?.overall_gain_loss || 0);\n    const gainLossPercent = Number(portfolioData?.overall_gain_loss_percent || 0);\n    const formatMoney = (value = 0) => Number(value || 0).toFixed(2);\n    const formatPercent = (value = 0) => Number(value || 0).toFixed(2);\n\n    return (\n        <div className=\"dashboard-container\">\n            <div className=\"dashboard-content\">\n                <div className=\"dashboard-header\">\n                    <h1>Welcome, {username}</h1>\n                    \n                    {/* Search Bar */}\n                    <form onSubmit={handleSearch} className=\"portfolio-search\">\n                        <div className=\"search-wrapper\">\n                            <Search size={20} />\n                            <input\n                                type=\"text\"\n                                placeholder=\"Search ticker to add...\"\n                                value={searchTicker}\n                                onChange={(e) => setSearchTicker(e.target.value)}\n                            />\n                        </div>\n                        <button type=\"submit\">Add Stock</button>\n                    </form>\n                </div>\n\n                {/* Portfolio Summary */}\n                <div className=\"portfolio-summary-card\">\n                    <h2>Total Portfolio Value</h2>\n                    <div className=\"value-display\">\n                        <span className=\"currency\">$</span>\n                        <span className=\"amount\">{totalValue.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2})}</span>\n                    </div>\n                    \n                    <div className={`pnl-indicator ${gainLoss >= 0 ? 'positive' : 'negative'}`}>\n                        {gainLoss >= 0 ? <TrendingUp size={24} /> : <TrendingDown size={24} />}\n                        <span className=\"pnl-amount\">\n                            {gainLoss >= 0 ? '+' : ''}\n                            ${Math.abs(gainLoss).toFixed(2)}\n                        </span>\n                        <span className=\"pnl-percent\">\n                            ({gainLossPercent.toFixed(2)}%)\n                        </span>\n                    </div>\n\n                    {/* Overall Graph Placeholder (or use mock data for \"Overall\" if history not tracked) */}\n                    <div className=\"portfolio-graph\">\n                        <ResponsiveContainer width=\"100%\" height={200}>\n                            <LineChart data={[\n                                { name: 'Start', value: totalCost },\n                                { name: 'Now', value: totalValue }\n                            ]}>\n                                <CartesianGrid strokeDasharray=\"3 3\" />\n                                <XAxis dataKey=\"name\" />\n                                <YAxis />\n                                <Tooltip />\n                                <Line type=\"monotone\" dataKey=\"value\" stroke=\"#8884d8\" strokeWidth={2} />\n                            </LineChart>\n                        </ResponsiveContainer>\n                    </div>\n                </div>\n\n                {/* Holdings List */}\n                <div className=\"holdings-section\">\n                    <h3>Your Holdings</h3>\n                    <div className=\"holdings-grid\">\n                        {portfolioData?.holdings?.map((stock) => (\n                            <div key={stock.ticker} className={`holding-card ${selectedStock === stock.ticker ? 'selected' : ''}`}>\n                                <div className=\"holding-header\" onClick={() => selectStock(stock.ticker)}>\n                                    <div className=\"ticker-info\">\n                                        <h4>{stock.ticker}</h4>\n                                        <span className=\"shares\">{stock.quantity} shares</span>\n                                    </div>\n                                    <div className=\"price-info\">\n                                        <div className=\"current-val\">${formatMoney(stock.market_value)}</div>\n                                        <div className={`stock-pnl ${stock.gain_loss >= 0 ? 'green' : 'red'}`}>\n                                            {stock.gain_loss >= 0 ? '+' : ''}{formatMoney(stock.gain_loss)} ({formatPercent(stock.gain_loss_percent)}%)\n                                        </div>\n                                    </div>\n                                </div>\n\n                                {/* Expanded View */}\n                                {selectedStock === stock.ticker && (\n                                    <div className=\"holding-details\">\n                                        <div className=\"mini-graph\">\n                                            <ResponsiveContainer width=\"100%\" height={100}>\n                                                <LineChart data={stockHistory}>\n                                                    <Line type=\"monotone\" dataKey=\"value\" stroke=\"#82ca9d\" dot={false} />\n                                                </LineChart>\n                                            </ResponsiveContainer>\n                                        </div>\n                                        <div className=\"holding-actions\">\n                                            <button className=\"btn-buy\" onClick={() => openTransactionModal(stock.ticker, \"buy\")}>\n                                                <Plus size={16} /> Buy More\n                                            </button>\n                                            <button className=\"btn-sell\" onClick={() => openTransactionModal(stock.ticker, \"sell\")}>\n                                                <Minus size={16} /> Sell\n                                            </button>\n                                        </div>\n                                    </div>\n                                )}\n                            </div>\n                        ))}\n                        {portfolioData?.holdings?.length === 0 && (\n                            <div className=\"empty-portfolio\">\n                                <p>You don't own any stocks yet. Search above to get started!</p>\n                            </div>\n                        )}\n                    </div>\n                </div>\n            </div>\n\n            {/* Transaction Modal */}\n            {showModal && (\n                <div className=\"modal-overlay\">\n                    <div className=\"modal-content\">\n                        <h3>{transactionType === 'buy' ? 'Buy' : 'Sell'} {transactionTicker}</h3>\n                        \n                        {error && <p className=\"error-text\">{error}</p>}\n                        \n                        <div className=\"form-group\">\n                            <label>Quantity</label>\n                            <input \n                                type=\"number\" \n                                min=\"1\"\n                                value={transactionQuantity}\n                                onChange={(e) => setTransactionQuantity(e.target.value)}\n                            />\n                        </div>\n                        \n                        <div className=\"form-group\">\n                            <label>Price per Share ($)</label>\n                            <input \n                                type=\"number\" \n                                step=\"0.01\"\n                                value={transactionPrice}\n                                onChange={(e) => setTransactionPrice(e.target.value)}\n                            />\n                        </div>\n\n                        <div className=\"modal-actions\">\n                            <button className=\"cancel-btn\" onClick={() => setShowModal(false)}>Cancel</button>\n                            <button className={`confirm-btn ${transactionType}`} onClick={handleTransaction}>\n                                Confirm {transactionType === 'buy' ? 'Purchase' : 'Sale'}\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n\nexport default Dashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}